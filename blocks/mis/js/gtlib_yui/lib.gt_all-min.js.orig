if(typeof(GTLib)=='undefined'){GTLib={version:2011042100,ExportFuncs:typeof(GTLib_ExportFuncs)!='undefined'?GTLib_ExportFuncs:false,Widget:{}};}
GTLib.Base={BindArguments:function(fn){var args=[];for(var n=1;n<arguments.length;n++)
args.push(arguments[n]);return function(){return fn.apply(this,args);};},ObjectCompare:function(object1,object2){if(object1==object2){return(true);}else{var atypes=['number','string','null','undefined'];for(var at=0;at<atypes.length;at++){var atype=atypes[at];if(typeof(object1)==atype||typeof(object2)==atype){return(false);}}}
var obj1nprops=0;for(var x in object1){obj1nprops++;}
var obj2nprops=0;for(var x in object2){obj2nprops++;}
if(obj1nprops!=obj2nprops||obj1nprops==0){return(false);}
for(var n in object1){if(typeof(object1[n])!='undefined'&&typeof(object2[n])!='undefined'){if(!GTLib.Base.ObjectCompare(object1[n],object2[n])){return(false);}}else{if(typeof(object1[n])=='undefined'&&typeof(object2[n])=='undefined'){return(true);}else{return(false);}}}
return(true);},ObjectPropsFromOptions:function(obj,options){var objprops=new Array();for(var p in obj){objprops[p]=true;}
for(var o in options){if(objprops[p]&&o.substr(0,1)!='_'&&o!="options"&&typeof(options[o])!='undefined'&&options[o]!=null){obj[o]=options[o];}}},Clone:function(obj){if(obj==null||typeof(obj)!='object'){return obj;}
var temp=new obj.constructor();for(var key in obj){temp[key]=GTLib.Base.Clone(obj[key]);}
return temp;}}
if(GTLib.ExportFuncs){BindArguments=GTLib.Base.BindArguments;ObjectCompare=GTLib.Base.ObjectCompare;}
GTLib.Browser={ie:navigator.appVersion.indexOf('MSIE')>-1,ie5:navigator.appVersion.indexOf('MSIE 5')>-1,ie6:navigator.appVersion.indexOf('MSIE 6')>-1,ie7:navigator.appVersion.indexOf('MSIE 7')>-1,ie8:navigator.appVersion.indexOf('MSIE 8')>-1,opera:navigator.userAgent.indexOf("Opera")>-1,safari:navigator.userAgent.indexOf("Safari")>-1,firefox:navigator.userAgent.indexOf("Firefox")>-1};GTLib.Array={search:function(needle,haystack){for(n=0;n<haystack.length;n++){if(needle===haystack[n]){return(n);}
if(GTLib.Base.ObjectCompare(needle,haystack[n])){return(n);}}
return(-1);},intPosKey:function(searchkey,haystack){var n=-1;for(var key in haystack){n++;if(searchkey===key){return(n);}}
return(-1);},isArray:function(testvar){return(testvar instanceof Array);}}
if(GTLib.ExportFuncs){arraySearch=GTLib.Array.search;isArray=GTLib.Array.isArray;}
GTLib.String={trim:function(s){var s=String(s);return s.replace(/^\s+|\s+$/,'');}}
if(GTLib.ExportFuncs){trim=GTLib.String.trim;}
GTLib.XML={TextToXMLObj:function(txt){try{var xmlObj=new ActiveXObject('Microsoft.XMLDOM');xmlObj.loadXML(txt);}catch(e){var xmlObj=new DOMParser().parseFromString(txt,'text/xml');}
return(xmlObj);},ChildrenByTag:function(node,chkTagName){if(node!==null&&typeof(node)!='undefined'&&node.childNodes){var nodes=node.childNodes;var retNodes=new Array();for(var c=0;c<=nodes.length;c++){var chkNd=nodes[c];if(chkNd!=null&&typeof(chkNd)!='undefined'){var thsTagName=chkNd.tagName;if(thsTagName==chkTagName){retNodes.push(chkNd);}}}
if(retNodes.length==0){return(null);}else{return(retNodes);}}else{return(null);}},FirstTagVal:function(nd,tagName){try{var nodeVal=nd.getElementsByTagName(tagName)[0].childNodes[0].nodeValue;}catch(e){return("");}
return(nodeVal);},FirstTagValUnpack:function(nd,tagName){var raw=GTLib.XML.FirstTagVal(nd,tagName);return(GTLib.XML.SafedUnpack(raw));},SafedUnpack:function(str){str=str.replace(/~~AMP~~/gi,'&');str=str.replace(/~~LT~~/gi,'<');str=str.replace(/~~GT~~/gi,'>');str=str.replace(/~~QT~~/gi,'"');str=str.replace(/~~AP~~/gi,'\'');return(str);},UnsafedPack:function(str){str=str.replace(/&/gi,'~~AMP~~');str=str.replace(/</gi,'~~LT~~');str=str.replace(/>/gi,'~~GT~~');str=str.replace(/"/gi,'~~QT~~');str=str.replace(/'/gi,'~~AP~~');return(str);}}
if(GTLib.ExportFuncs){TextToXMLObj=GTLib.XML.TextToXMLObj;XMLChildrenByTag=GTLib.XML.ChildrenByTag;XMLFirstTagVal=GTLib.XML.FirstTagVal;XMLFirstTagValUnpack=GTLib.XML.FirstTagValUnpack;XMLSafedUnpack=GTLib.XML.SafedUnpack;XMLUnsafedPack=GTLib.XML.UnsafedPack;}
GTLib.DOM={getEl:function(id){if(typeof(id)=="string"){return(document.getElementById(id));}else{return(id);}},getFieldVal:function(id,seperator,fname){var sep=seperator?seperator:"|";var el=GTLib.DOM.getEl(id);var opts=null;var val="";var cbs=null;if(!el||typeof(el)=='undefined'||el.id==''||(GTLib.Browser.ie&&el.innerHTML=='')){if(typeof(fname)!=='undefined'){el=document.forms[fname].elements[id];}else{el=document.forms[0].elements[id];}
if(!el){el=GTLib.DOM.getEl(id);}}
if(typeof(el)=='object'){if(typeof(el.type)=='undefined'&&typeof(el.nodeName)=='undefined'){var elmembers=el;el=el[0];}
if(el.type=='text'||el.type=='textarea'||el.type=='hidden'){return(el.value);}else if(el.type=='checkbox'||el.type=='radio'){if(elmembers&&elmembers.length){cbs=elmembers;}else{cbs=el;}
val="";for(c=0;c<cbs.length;c++){if(cbs[c].checked){val+=val!=""?sep:"";val+=cbs[c].value;}}
return(val);}else if(typeof(el.type)!='undefined'&&el.nodeName.toLowerCase()=='select'){opts=el.getElementsByTagName('option');val="";for(o=0;o<opts.length;o++){if(opts[o].selected){val+=val!=""?sep:"";val+=opts[o].value;}}
return(val);}}else if(el.nodeName.toLowerCase()=='select'){opts=el.getElementsByTagName('option');val="";for(o=0;o<opts.length;o++){if(opts[o].selected){val+=val!=""?sep:"";val+=opts[o].value;}}
return(val);}
return('');},setFieldVal:function(id,val,fname){var el=GTLib.DOM.getEl(id);if(!el||el.id==''){if(typeof(fname)!=='undefined'){var el=document.forms[fname].elements[id];}else{var el=document.forms[0].elements[id];}}
if(el.type=='select-one'||el.type=='select-multiple'||el.type=='select'){for(var o=0;o<el.options.length;o++){if(typeof(el.options[o])!=='undefined'&&el.options[o].value==val){el.options[o].selected='selected';}else if(el.type!='select-multiple'){el.options[o].selected='';}}}else if(el.type=='textarea'){el.innerHTML=val;el.value=val;}else{el.value=val;}},labelByFor:function(id,parentEl){var parentEl=typeof(parentEl)=='undefined'?document:parentEl;var labels=parentEl.getElementsByTagName('label');for(var l=0;l<labels.length;l++){var fr=labels[l].getAttribute('for');if(id==fr){return(labels[l]);}}},createEl:function(elType,opts){var elType=elType.toLowerCase();var el=document.createElement(elType);var opts=!opts?{}:opts;var applicable=['id','className','class','style','innerHTML','name','multiple'];for(var a=0;a<applicable.length;a++){if(opts[applicable[a]]){var attname=applicable[a];attname=attname=='className'?'class':attname;if(attname=='class'&&(GTLib.Browser.ie5||GTLib.Browser.ie6||GTLib.Browser.ie7)){attname='className';}
if(attname=='style'&&GTLib.Browser.ie){el.style.setAttribute('cssText',opts['style'],0);}else{el.setAttribute(attname,opts[applicable[a]]);}}}
if(opts.apply){if(opts.parent){parent.appendChild(el);}else{document.body.appendChild(el);}}
return(el);},unlinkedAnchor:function(opts){var a=GTLib.DOM.createEl('a',opts);a.href='#';a.onclick=function(){return(false)};return(a);},getElDims:function(el){return({h:el.offsetHeight,w:el.offsetWidth});},getElByTagAndClass:function(parent,tag,exactclasses){var els=new Array();var kids=parent.getElementsByTagName(tag);for(k=0;k<kids.length;k++){if(kids[k].className==exactclasses){els.push(kids[k]);}}
return(els);}}
if(GTLib.ExportFuncs){$GT=GTLib.DOM.getEl;$GTF=GTLib.DOM.getFieldVal;setFieldVal=GTLib.DOM.setFieldVal;createEl=GTLib.DOM.createEl;unlinkedAnchor=GTLib.DOM.unlinkedAnchor;labelByFor=GTLib.DOM.labelByFor;}
GTLib.Ajax={respTextInErrors:false,Post:function(uri,postData,callbacks,options){if(typeof(options)=='undefined'){options={};}
if(typeof(options.failOnUnload)=='undefined'){options.failOnUnload=false;}
if(typeof(options.noAJAXSupport)=='undefined'){options.noAJAXSupport='Your browser does not appear to support AJAX. You could download a modern standards compliant web browser - e.g. Firefox, Opera or Safari';}
if(typeof(options.retryMax)=='undefined'){options.retryMax=2;}
if(typeof(options.retryPass)=='undefined'){options.retryPass=0;}
var http;if(window.XMLHttpRequest){http=new XMLHttpRequest();if(http.overrideMimeType){http.overrideMimeType('text/xml');}}
else if(window.ActiveXObject){try{http=new ActiveXObject("Msxml2.XMLHTTP");}
catch(e){try{http=new ActiveXObject("Microsoft.XMLHTTP");}
catch(e){}}}
if(!http){alert(options.noAJAXSupport);return false;}
var req={http:http,unloaded:false,wuri:window.location,uri:uri,postData:postData,callbacks:callbacks,options:options};req.http.onreadystatechange=function(){GTLib.Ajax._ResponseTriggerCallBack(req);};YAHOO.util.Event.addListener(window,'unload',function(){req.unloaded=true;});req.http.open('POST',uri,true);req.http.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");req.http.send(postData);},_ResponseTriggerCallBack:function(req){var http=req.http;req.readyState=http.readyState;if(http.readyState==4){if(http.status==200){req.responseText=http.responseText;req.responseXML=http.responseXML;req.callbacks.success(req);}else{window.setTimeout(function(){GTLib.Ajax._TriggerFailureCallBack(req);},1000);}}},_TriggerFailureCallBack:function(req){req.options.retryPass++;var retryPass=req.options.retryPass;var retryMax=req.options.retryMax;var failOnUnload=req.options.failOnUnload;var unload=false;if(req.unloaded==true){unload=true;}else if(req.wuri!=window.location){unload=true;}
if(retryPass<retryMax&&unload==false){GTLib.Ajax.Post(req.uri,req.postData,req.callbacks,req.options);}else{if(unload==false||failOnUnload){req.callbacks.failure(req);}}},CheckXMLCriticalErrors:function(xmlObj,report){var report=typeof(report)=='undefined'?true:report
var criticalError=XMLFirstTagValUnpack(xmlObj,'critical_error');if(report){if(criticalError){var dg=new Dialog("<span class='title_error'>Error - Critical Error</span>","<div class='body_error'></div>"+criticalError,{buttons:[{name:'Close',functCode:function(){dg.CloseDialog();}}],lightBox:true,w:280,h:220,zIndex:2000});dg.Init();return(criticalError);}}
return(criticalError);},ResponseToDomXML:function(http){var response=http.responseText;try{var xmlDomObj=new ActiveXObject('Microsoft.XMLDOM');xmlDomObj.loadXML(response);}catch(e){var xmlDomObj=new DOMParser().parseFromString(response,'text/xml');}
return(xmlDomObj.documentElement);},ResponseToDomXMLValidate:function(http,resptype,reporterrors){var resp=GTLib.Ajax.ResponseToDomXML(http);var criticalError=GTLib.Ajax.CheckXMLCriticalErrors(resp,reporterrors);if(criticalError){return({resp:resp,error:criticalError});}
var respTypeCheck=XMLFirstTagVal(resp,'response_type');if(respTypeCheck!=resptype){var resptxterr=GTLib.Ajax.respTextInErrors?'  '+http.responseText:'';var respError='Error: unrecognised response received - expected '+resptype+' but received '+respTypeCheck+resptxterr;if(reporterrors){alert(respError);}
return({resp:resp,error:respError});}
return({resp:resp,error:false});}};if(GTLib.ExportFuncs){AJAXResponseToDomXML=GTLib.Ajax.ResponseToDomXML;AJAXPost=function(uri,postData,callbacks,options){GTLib.Ajax.Post(uri,postData,callbacks,options)};AJAXCheckXMLCriticalErrors=GTLib.Ajax.CheckXMLCriticalErrors;AJAXResponseToDomXMLValidate=GTLib.Ajax.ResponseToDomXMLValidate;}
GTLib.DD={ZIndex:function(id,sGroup,config){GTLib.DD.ZIndex.superclass.constructor.apply(this,arguments);}};/*YAHOO.lang.extend(GTLib.DD.ZIndex,YAHOO.util.DD,{origZ:0,startDrag:function(x,y){YAHOO.log(this.id+" startDrag","info","example");*/var style=this.getEl().style;this.origZ=style.zIndex;style.zIndex=this.config.dragZ;},endDrag:function(e){this.getEl().style.zIndex=this.origZ;}});GTLib.Form={applyFilterKeys:function(fieldId,lists){var field=GTLib.DOM.getEl(fieldId);field.onkeypress=function(e){return(GTLib.Form._filterKeys(e,lists))};},_filterKeys:function(e,lists){ev=(window.event)?event:e;if(window.event){var keyCode=ev.keyCode;}else{var keyCode=ev.charCode;}
var ecd=String.fromCharCode(keyCode);if(!keyCode){return true;}
var keyValid=keyCode;if(typeof(lists.blacklist)!='undefined'){if(GTLib.Array.isArray((lists.blacklist))){if(GTLib.Array.search(ecd,lists.blacklist)>-1){keyValid=false;}}}
if(typeof(lists.whitelist)!='undefined'){if(GTLib.Array.isArray((lists.whitelist))){if(GTLib.Array.search(ecd,lists.whitelist)==-1){keyValid=false;}}}
return(keyValid);},makeAjaxSendStr:function(form){var inps=form.getElementsByTagName('input');var sels=form.getElementsByTagName('select');var tas=form.getElementsByTagName('textarea');var sendstr='';sendstr=GTLib.Form._buildSendStr(sendstr,inps);sendstr=GTLib.Form._buildSendStr(sendstr,sels);sendstr=GTLib.Form._buildSendStr(sendstr,tas);return(sendstr);},_buildSendStr:function(sendstr,elarray){for(var i=0;i<elarray.length;i++){var el=elarray[i];if(el.id||el.name){sendstr+=sendstr==''?'':'&';var name=el.id?el.id:el.name;var fldval=$GTF(name);if(fldval){sendstr+=name+'='+fldval.replace(/&/g,'~~AMP~~');}}}
return(sendstr);}}
if(GTLib.ExportFuncs){formMakeAjaxSendStr=GTLib.Form.makeAjaxSendStr;applyFilterKeys=GTLib.Form.applyFilterKeys;}
GTLib.Moodle={get_string:function(identifier,module,a){if(typeof(moodle_lang[module])!='undefined'&&moodle_lang[module]!=null){if(typeof(moodle_lang[module][identifier])!='undefined'&&moodle_lang[module][identifier]!=null){var output=moodle_lang[module][identifier];output=output.replace(/\$a/g,a);}
return(output);}else{return('['+identifier+']');}}}
if(GTLib.ExportFuncs){moodle_get_string=GTLib.Moodle.get_string;}